(this["webpackJsonpcovid-viz"]=this["webpackJsonpcovid-viz"]||[]).push([[0],{212:function(e,t,a){e.exports=a(227)},222:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),o=a.n(i),c=a(90),s=a(26),u=a(10),l=a(2),d=a(9),f=a(138),m=a(285),v=a(125),h=a(139);function p(e){var t=e.lat,a=e.lng,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(90-t)*Math.PI/180,i=(90-a)*Math.PI/180,o=100*(1+n);return{x:o*Math.sin(r)*Math.cos(i),y:o*Math.cos(r),z:o*Math.sin(r)*Math.sin(i)}}function g(e){var t=e.renderer,a=e.globe,n=e.camera,r=e.onClick,i=t.domElement,o=new l.Q,c=new l.eb,s={clientX:0,clientY:0},u=function(){var e,t;return{clientX:null!==(e=d.i.clientX)&&void 0!==e?e:d.i.changedTouches[0].clientX,clientY:null!==(t=d.i.clientY)&&void 0!==t?t:d.i.changedTouches[0].clientY}},f=function(){var e=u();if(!(Math.sqrt(Math.pow(s.clientX-e.clientX,2)+Math.pow(s.clientY-e.clientY,2))>5)){var t=i.getBoundingClientRect(),l=t.width,d=t.height;c.x=e.clientX/l*2-1,c.y=-e.clientY/d*2+1,o.setFromCamera(c,n);var f=o.intersectObjects([a],!0);if(f.length>0){var m=function(e){var t=e.x,a=e.y,n=e.z,r=Math.sqrt(t*t+a*a+n*n),i=Math.acos(a/r),o=Math.atan2(n,t);return{lat:90-180*i/Math.PI,lng:90-180*o/Math.PI-(o<-Math.PI/2?360:0),altitude:r/100-1}}(f[0].point);r(m)}else r()}},m=d.q(i),v=function(){s=u()};m.on("mousedown",v),m.on("click",f),m.on("touchstart",v),m.on("touchend",f)}var b=a(12),_=a.n(b),y=a(19),E=function(){var e=Object(y.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function O(e){var t=e;return t.forEach((function(e){var t=0;e.densities.values.forEach((function(e){t+=e})),e.densities.values.forEach((function(a,n){e.densities.values[n]/=t})),t=0,e.densities.values.forEach((function(a,n){e.densities.values[n]+=t,t=e.densities.values[n]}))})),t}var x=function(){var e=Object(y.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[fetch("./admin-0-density.json"),fetch("./admin-1-density.json")],a=[],e.next=4,Promise.allSettled(t.map(function(){var e=Object(y.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O,e.next=3,E(t);case 3:e.t1=e.sent,n=(0,e.t0)(e.t1),a.push.apply(a,Object(s.a)(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=a(60),j=a(71),S=a.n(j),k=a(127),C=a(35),D=a(53);function I(e,t){for(var a=0;a<Math.max(e.length,t.length);++a)if(e[a]!==t[a])return!1;return!0}var M=function(){function e(){Object(C.a)(this,e),this.admin=[],this.values=[]}return Object(D.a)(e,[{key:"getValueRange",value:function(){return[0,this.values.length]}},{key:"getValue",value:function(e){return this.values[e]}}],[{key:"create",value:function(t,a){var n=new e;return n.admin=t,n.values=a,n}}]),e}(),N=function(){function e(){Object(C.a)(this,e),this.admin=[],this.days=[],this.data=[]}return Object(D.a)(e,[{key:"getValueRange",value:function(){return this.days.length<=0?[0,0]:[this.days[0],this.days[this.days.length-1]+1]}},{key:"getValue",value:function(e){var t=this,a=S()(this.days,e,(function(e,t){return e-t}));if(a>=0)return this.data[a];if(a<0&&(a=-a-1),0===a)return 0;if(a===this.days.length)return this.data[this.data.length-1];var n=[a-1,a],r=n.map((function(e){return t.data[e]})),i=Object(u.a)(r,2),o=i[0],c=i[1],s=n.map((function(e){return t.days[e]})),l=Object(u.a)(s,2),d=l[0],f=l[1],m=(e-d)/(f-d);return o*(1-m)+c*m}},{key:"values",get:function(){var e=this,t=this.getValueRange();return new Array(t[1]).fill(0).map((function(t,a){return e.getValue(a)}))}}]),e}(),R=a(128),z=a.n(R),A=function(e){var t,a=null===e||void 0===e?void 0:e.properties,n=null!==(t=null===a||void 0===a?void 0:a.ADMIN)&&void 0!==t?t:null===a||void 0===a?void 0:a.admin,r=null===a||void 0===a?void 0:a.name_alt;return"Admin-0 country"===(null===a||void 0===a?void 0:a.featurecla)?[n]:[n,r]};function T(e){return V.apply(this,arguments)}function V(){return(V=Object(y.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"===typeof t&&(t=[t]),a=t.map((function(e){return fetch(e)})),n=void 0,e.next=5,Promise.allSettled(a.map(function(){var e=Object(y.a)(_.a.mark((function e(t){var a,r,i,o,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(null!==(a=t.fetch)&&void 0!==a?a:t);case 2:c=e.sent,z()(c,!0),null===(r=(i=t).preprocess)||void 0===r||r.call(i,c),void 0===n?n=c:(o=n.features).push.apply(o,Object(s.a)(c.features));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(y.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T("./ne_110m_admin_0_countries.geojson"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(y.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T("./ne_10m_admin_1_states_provinces.geojson"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(){var e=10;return k.isMobile&&(e=30),e},U=[112,96];function G(e){return e.map((function(t,a){var n,r=t/(null!==(n=e[a-1])&&void 0!==n?n:0);if(Number.isFinite(r))return r}))}var L=a(272),Y=a(280),J=a(273),H=a(281),X=a(143),W=a(137),q=a.n(W),K=a(134),Q=a.n(K),$=a(135),Z=a.n($),ee=a(268),te=a(136),ae=a.n(te),ne=a(228),re=a(271),ie=a(274),oe=a(275),ce=a(290),se=a(286),ue=a(292),le=a(278),de=a(288),fe=a(279),me=a(293),ve=a(282),he=a(283),pe=a(284),ge=a(294),be=a(129),_e=a.n(be);function ye(e){return function(t,a){return e(a)}}function Ee(e){var t,a=e.paused,i=e.setPaused,o=e.dataSource,c=e.setDataSource,s=e.globals,l=_e()(),d=function(e){return[s[e],function(t){s[e]=t,l()}]},f=Object(n.useState)(!1),m=Object(u.a)(f,2),v=m[0],h=m[1],p=Object(n.useState)(!1),g=Object(u.a)(p,2),b=g[0],O=g[1],x=Object(n.useState)(!1),w=Object(u.a)(x,2),j=w[0],S=w[1],k=Object(n.useState)(!1),C=Object(u.a)(k,2),D=C[0],I=C[1],M=Object(n.useState)(),N=Object(u.a)(M,2),R=N[0],z=N[1],A=Object(n.useState)(),T=Object(u.a)(A,2),V=T[0],P=T[1],B=Object(n.useState)(s.extinction!==Number.POSITIVE_INFINITY),U=Object(u.a)(B,2),G=U[0],W=U[1],K=Object(n.useState)(Math.min(s.extinction,3)),$=Object(u.a)(K,2),te=$[0],be=$[1],Ee=d("keepDeaths"),Oe=Object(u.a)(Ee,2),xe=Oe[0],we=Oe[1],je=d("useRecoveryData"),Se=Object(u.a)(je,2),ke=Se[0],Ce=Se[1],De=v||b;return Object(n.useEffect)((function(){void 0===R&&D&&Object(y.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(fetch("./licenseInfos.json"));case 2:t=e.sent,z(t);case 4:case"end":return e.stop()}}),e)})))()}),[D,R]),Object(n.useEffect)((function(){s.extinction=G?te:Number.POSITIVE_INFINITY}),[te,G]),r.a.createElement("div",{className:"ui-overlay"},r.a.createElement(ne.a,{in:!De},r.a.createElement("div",{className:"buttons"},r.a.createElement(ee.a,{"aria-label":"pause toggle",onClick:function(){return i(!a)},className:"pause-toggle"},a?r.a.createElement(Q.a,null):r.a.createElement(Z.a,null)),r.a.createElement(ee.a,{"aria-label":"change visualization parameters",onClick:function(){return O(!0)},className:"parameters"},r.a.createElement(ae.a,null)),r.a.createElement(ee.a,{"aria-label":"help",onClick:function(){return h(!0)},className:"help"},r.a.createElement(q.a,null)))),r.a.createElement(re.a,{in:b,unmountOnExit:!0},r.a.createElement("div",{className:"info-card"},r.a.createElement(L.a,null,r.a.createElement(J.a,{className:"description"},r.a.createElement(X.a,{variant:"h5",component:"h2"},"Visualization parameters"),r.a.createElement(ie.a,{row:!0},r.a.createElement(oe.a,{variant:"filled",fullWidth:!0},r.a.createElement(ce.a,{id:"demo-simple-select-filled-label"},"Data source"),r.a.createElement(se.a,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",value:o,onChange:(t=c,function(e){return t(e.target.value)})},r.a.createElement(ue.a,{value:"google"},"COVID-19 Open-Data"),r.a.createElement(ue.a,{value:"jhu"},"JHU CSSE COVID-19 Data"),r.a.createElement(ue.a,{value:"bing"},"Microsoft Bing COVID-19 data")))),r.a.createElement(ie.a,{row:!0},r.a.createElement(le.a,{control:r.a.createElement(de.a,{checked:G,onChange:ye(W)}),label:"Extinction"})),r.a.createElement(fe.a,{container:!0,spacing:2},r.a.createElement(fe.a,{item:!0,xs:!0},r.a.createElement(me.a,{value:te,onChange:ye(be),"aria-labelledby":"extinction",valueLabelDisplay:"auto",disabled:!G,min:1})),r.a.createElement(fe.a,{item:!0},r.a.createElement(X.a,null,te," day",te>1?"s":null))),r.a.createElement(ie.a,{row:!0},r.a.createElement(le.a,{control:r.a.createElement(de.a,{checked:xe,onChange:ye(we),disabled:!G}),label:"Keep deaths"}),r.a.createElement(le.a,{control:r.a.createElement(de.a,{checked:ke,onChange:ye(Ce)}),label:"Use recovery data"}))),r.a.createElement(Y.a,null,r.a.createElement(H.a,{size:"small",onClick:function(){return O(!1)}},"Dismiss"))))),r.a.createElement(re.a,{in:v,unmountOnExit:!0},r.a.createElement("div",{className:"info-card"},r.a.createElement(L.a,null,r.a.createElement(J.a,{className:"description"},r.a.createElement(X.a,{variant:"h5",component:"h2"},"COVID-19 Visualizer"),r.a.createElement(X.a,{paragraph:!0},"This webapp fetches the latest ",r.a.createElement(ve.a,{href:"https://github.com/CSSEGISandData/COVID-19"},"JHU CSSE COVID-19 Data")," and generates a point-based visualization in ",r.a.createElement(ve.a,{href:"https://threejs.org/"},"three.js")," on top of a"," ",r.a.createElement(ve.a,{href:"https://github.com/vasturiano/three-globe"},"ThreeJS Globe Visualization"),". This visualization largely follows the same approach as in ",r.a.createElement(ve.a,{href:"https://github.com/EFHIII/COVID-19"},"Edward Haas's COVID-19 Confirmed cases map over time"),", but with interactive parameters (e.g. point extinction) and processed in real-time using the latest data."),r.a.createElement(X.a,{paragraph:!0},"Each point in the visualizer represents ",F()," cases."),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(X.a,null,r.a.createElement("span",{style:{color:"steelblue"}},"Blue")," represents confirmed cases")),r.a.createElement("li",null,r.a.createElement(X.a,null,r.a.createElement("span",{style:{color:"red"}},"Red")," represents deaths")),r.a.createElement("li",null,r.a.createElement(X.a,null,r.a.createElement("span",{style:{color:"green"}},"Green")," represents recovered cases",r.a.createElement("br",null),"In many cases, the recovered case data is unreliable or missing. This visualizer assumes a recovery time of 14 days if no other data is available."))),r.a.createElement(X.a,{paragraph:!0},"The points are positioned randomly within each region according to population density."),r.a.createElement(X.a,{paragraph:!0},"The blue and red lines on the chart indicate confirmed cases and deaths, respectively. The faint blue and red lines represent the multiplicative increase in confirmed cases and deaths, respectively, from the following day. The plot's range is 1.0x-1.25x (bottom-top) daily growth factor."),r.a.createElement(X.a,{paragraph:!0},"You can click on the globe to limit the chart to a specific region. Clicking outside any region, reverts the chart to global mode."),r.a.createElement(X.a,{paragraph:!0},"The chart is draggable and zoomable in the time-axis. Clicking on a point in the chart will revert the visualization to the clicked time. The current time indicator can be dragged for scrubbing purposes.")),r.a.createElement(Y.a,null,r.a.createElement(H.a,{size:"small",onClick:function(){return h(!1)}},"Dismiss"),r.a.createElement(H.a,{size:"small",onClick:function(){return S(!j)}},"Sources"),r.a.createElement(H.a,{size:"small",onClick:function(){return I(!D)}},"Dependencies"),r.a.createElement(H.a,{size:"small",href:"https://github.com/trylle/covid-viz"},"GitHub")),r.a.createElement(he.a,{in:j,timeout:"auto",unmountOnExit:!0},r.a.createElement(J.a,{className:"sources"},r.a.createElement(X.a,{paragraph:!0},"The COVID-19 statistics for this visualizer are sourced from"," ",r.a.createElement(ve.a,{href:"https://github.com/CSSEGISandData/COVID-19"},"JHU CSSE COVID-19 Data"),"."),r.a.createElement(X.a,{paragraph:!0},"Population density is derived from the"," ",r.a.createElement(ve.a,{href:"https://ghsl.jrc.ec.europa.eu/download.php?ds=pop"},"Global Human Settlement Layer"),". Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f."),r.a.createElement(X.a,{paragraph:!0},"World & US GeoJson data was sourced from ",r.a.createElement(ve.a,{href:"https://github.com/nvkelso/natural-earth-vector"},"Natural Earth"),"."),r.a.createElement(X.a,{paragraph:!0},"China GeoJson data was sourced from ",r.a.createElement(ve.a,{href:"https://gadm.org/download_country_v3.html"},"GADM"),"."),r.a.createElement(X.a,{paragraph:!0},"Bathymetry texture was sourced from"," ",r.a.createElement(ve.a,{href:"https://www.naturalearthdata.com/downloads/50m-raster-data/50m-bathymetry"},"Natural Earth"),"."))),r.a.createElement(he.a,{in:D,timeout:"auto",unmountOnExit:!0},r.a.createElement(J.a,{className:"dependencies"},r.a.createElement(X.a,{paragraph:!0},"This application uses the following libraries:"),Object.keys(null!==R&&void 0!==R?R:{}).map((function(e){var t=R[e];return r.a.createElement(X.a,{key:e,paragraph:!0},r.a.createElement(ve.a,{href:t.repository},e)," licensed as ",r.a.createElement(ve.a,{onClick:function(){return P(t.licenseText)}},t.license),".")}))))))),r.a.createElement(pe.a,{open:void 0!==V,onClick:function(){return P(void 0)},className:"license-backdrop"},r.a.createElement(L.a,{className:"license-card"},r.a.createElement(J.a,{className:"license-content"},r.a.createElement(ge.a,{multiline:!0,value:V,InputProps:{readOnly:!0}})))))}a(222);var Oe=a(79),xe=a(63),we=a.n(xe);function je(e){return"US"!==(e=e.map((function(e){if(""!==e)return e})))[0]&&"United States"!==e[0]||(e[0]="United States of America"),e}var Se=function(){var e=Object(y.a)(_.a.mark((function e(){var t,a,n,r,i,o,c,s,u,l,f,m,v,h,p=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv",p.length>1?p[1]:void 0,a=d.r("%-m/%-d/%y"),n=function(e){return e.findIndex((function(e){return null!==a(e)}))},e.next=6,d.e(t,(function(e){for(var t,a,r=je([null!==(t=e["Country/Region"])&&void 0!==t?t:e.Country_Region,null!==(a=e["Province/State"])&&void 0!==a?a:e.Province_State]),i=Object.keys(e),o=[],c=n(i);c<i.length;++c){var s=e[i[c]];we()(void 0!==s),o.push(+s)}return M.create(r,o)}));case 6:r=e.sent,i=0;case 8:if(!(i<r.length)){e.next=22;break}o=r[i],c=function(e){var t=r[e];if(!I(o.admin,t.admin))return s=e,"continue";o.values=o.values.map((function(a,n){return s=e,a+t.values[n]})),r.splice(e,1),--e,s=e},s=i+1;case 12:if(!(s<r.length)){e.next=19;break}if("continue"!==c(s)){e.next=16;break}return e.abrupt("continue",16);case 16:++s,e.next=12;break;case 19:++i,e.next=8;break;case 22:for(u=r.columns,l=[],f=n(u),m=f;m<u.length;++m)v=u[m],h=a(v),we()(h),l.push(h);return e.abrupt("return",{dates:l,data:r});case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(y.a)(_.a.mark((function e(t,a,n){var r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Map,e.next=3,Promise.allSettled(t.map(function(){var e=Object(y.a)(_.a.mark((function e(t){var n,i,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.func,i=t.path,e.next=3,Se(i,a);case 3:o=e.sent,r.has(n)||r.set(n,[]),r.get(n).push(o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:Object(s.a)(r.keys()).forEach((function(e){var t,a=r.get(e),i={data:[],dates:[]},o=Object(Oe.a)(a);try{for(o.s();!(t=o.n()).done;){var c,u=t.value;0===i.dates.length&&(i.dates=u.dates),(c=i.data).push.apply(c,Object(s.a)(u.data))}}catch(d){o.e(d)}finally{o.f()}void 0===n.startDate&&(n.startDate=i.dates[0]);var l=new Array(i.dates.length).fill(0);i.data.forEach((function(e){var t=e.admin,a=e.values;void 0!==t[0]&&1===t.reduce((function(e,t){return e+(void 0!==t?1:0)}),0)&&l.forEach((function(e,t){l[t]+=a[t]}))})),i.data.push(M.create(["Worldwide"],l)),e(i)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();function Ce(e){return"US"!==(e=e.map((function(e){if(""!==e)return e})))[0]&&"United States"!==e[0]||(e[0]="United States of America"),"China (mainland)"===e[0]&&(e[0]="China"),e}function De(){return(De=Object(y.a)(_.a.mark((function e(t,a,n){var r,i,o,c,s,l,f,m,v,h;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://raw.githubusercontent.com/microsoft/Bing-COVID-19-Data/master/data/Bing-COVID19-Data.csv",r=d.r("%-m/%-d/%Y"),i=new Map,o=function(e){var t=r(e);if(!t)return t;var a=t.valueOf(),n=i.get(a);return n||(i.set(a,t),t)},c=function(e){return e.map((function(e){return null!==e&&void 0!==e?e:""})).join("/")},e.next=7,d.e("https://raw.githubusercontent.com/microsoft/Bing-COVID-19-Data/master/data/Bing-COVID19-Data.csv",(function(e){var t=Ce([e.Country_Region,e.AdminRegion1,e.AdminRegion2]);return{admin:t,adminKey:c(t),date:o(e.Updated),confirmed:e.Confirmed,recovered:e.Recovered,deaths:e.Deaths}}));case 7:s=e.sent,l=Array.from(i.values()).sort((function(e,t){return e.valueOf()-t.valueOf()})),f=new Map,l.forEach((function(e,t){return f.set(e,t)})),m=new Map,s.forEach((function(e){var t=e.admin,a=e.adminKey,n=e.date,r=e.confirmed,i=e.recovered,o=e.deaths;if(n){var c=m.get(a);c||(c={admin:t,confirmed:new Map,recovered:new Map,deaths:new Map},m.set(e.adminKey,c));var s=f.get(n);void 0!==r&&c.confirmed.set(s,+r),void 0!==i&&c.recovered.set(s,+i),void 0!==o&&c.deaths.set(s,+o)}})),v=function(e){var t=new Array(e.length).fill(0),a=0;return t.map((function(t,n){var r,i=null!==(r=e[n])&&void 0!==r?r:a;return a=i,i}))},h=function(e){return{dates:l,data:Array.from(m).map((function(t){var a=Object(u.a)(t,2),n=(a[0],a[1]);return M.create(n.admin,v(n[e]))}))}},n.setStatsConfirmed(h("confirmed")),n.setStatsRecovered(h("recovered")),n.setStatsDeaths(h("deaths")),void 0===a.startDate&&(a.startDate=l[0]);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ie="https://storage.googleapis.com/covid19-open-data/v2/index.csv",Me="https://storage.googleapis.com/covid19-open-data/v2/epidemiology.csv";function Ne(e){return e=e.map((function(e){if(""!==e)return e}))}var Re=function(){function e(){Object(C.a)(this,e),this.cache=new Map}return Object(D.a)(e,[{key:"gc",value:function(e){if(e){var t=e.valueOf(),a=this.cache.get(t);return a||(this.cache.set(t,e),e)}}},{key:"dates",get:function(){return Array.from(this.cache.values()).sort((function(e,t){return e.valueOf()-t.valueOf()}))}}]),e}(),ze=function(){function e(){Object(C.a)(this,e),this.cache=new Map}return Object(D.a)(e,[{key:"gc",value:function(e){if(e){var t=function(e){return e.map((function(e){return null!==e&&void 0!==e?e:""})).join("/")}(e),a=this.cache.get(t);return a||(this.cache.set(t,e),e)}}}]),e}();function Ae(){return(Ae=Object(y.a)(_.a.mark((function e(t,a,n){var r,i,o,c,s,l,f,m,v,h,p,g,b,E,O,x,w,j,S,k;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open("v1");case 2:return r=e.sent,i=[Ie,Me],e.next=6,Promise.all(i.map(function(){var e=Object(y.a)(_.a.mark((function e(t){var a,n,i,o,c,s,u;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.match(t);case 2:if(s=e.sent,u=null===(a=s)||void 0===a||null===(n=a.headers)||void 0===n||null===(i=n.get)||void 0===i?void 0:i.call(n,"expires"),new Date(null!==u&&void 0!==u?u:0)>new Date){e.next=11;break}return e.next=8,r.add(t);case 8:return e.next=10,r.match(t);case 10:s=e.sent;case 11:return e.next=13,null===(o=s)||void 0===o||null===(c=o.text)||void 0===c?void 0:c.call(o);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return o=e.sent,c=Object(u.a)(o,2),s=c[0],l=c[1],we()(s&&l),f=new ze,m=new Map,e.next=15,d.f(s,(function(e){var t=e.key,a=Ne([e.country_name,e.subregion1_name,e.subregion2_name,e.locality_name]);return{key:t,admin:f.gc(a)}}));case 15:return e.sent.forEach((function(e){var t=e.key,a=e.admin;m.set(t,a)})),v=d.r("%Y-%-m-%-d"),h=new Re,p=function(e){var t=v(e);return h.gc(t)},e.next=22,d.f(l,(function(e){var t=e.key,a=void 0!==t?m.get(t):void 0;if(a){var n=e.total_confirmed,r=e.total_recovered,i=e.total_deceased,o=e.total_tested;if(""!==n||""!==r||""!==i||""!==o)return{key:t,admin:a,date:p(e.date),confirmed:n,recovered:r,deaths:i,tested:o}}}));case 22:for(g=e.sent,b=h.dates,E=b[0],O=b[b.length-1],x=E;x<O;x.setDate(x.getDate()+1))h.gc(x);w=h.dates,j=new Map,w.forEach((function(e,t){return j.set(e,t)})),S=new Map,g.forEach((function(e){var t=e.key,a=e.admin,n=e.date,r=e.confirmed,i=e.recovered,o=e.deaths;if(n){var c=S.get(t);c||(c={admin:a,confirmed:new Map,recovered:new Map,deaths:new Map},S.set(t,c));var s=j.get(n);void 0!==r&&c.confirmed.set(s,+r),void 0!==i&&c.recovered.set(s,+i),void 0!==o&&c.deaths.set(s,+o)}})),k=function(e){var t=Array.from(S).map((function(t){var a=Object(u.a)(t,2),n=(a[0],a[1]),r=new N;r.admin=n.admin;var i=Array.from(n[e].entries()).sort((function(e,t){var a=Object(u.a)(e,2),n=(a[0],a[1]),r=Object(u.a)(t,2);r[0];return n-r[1]}));r.days=i.map((function(e){var t=Object(u.a)(e,2),a=t[0];t[1];return a})),r.data=i.map((function(e){var t=Object(u.a)(e,2);t[0];return t[1]}));var o=w.length-1;return r.days[r.days.length-1]!==o&&(r.data.push(r.getValue(o)),r.days.push(o)),r})),a=new M,n=t.filter((function(e){var t=[e.admin[0]];return void 0!==t[0]&&I(t,e.admin)}));return a.admin=["Worldwide"],a.values=w.map((function(e,t){return n.reduce((function(e,a){return e+=a.getValue(t)}),0)})),t.push(a),{dates:w,data:t}},n.setStatsConfirmed(k("confirmed")),n.setStatsRecovered(k("recovered")),n.setStatsDeaths(k("deaths")),void 0===a.startDate&&(a.startDate=w[0]);case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t,a,n){switch(e){case"jhu":!function(e,t,a){var n=[{path:"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv",func:a.setStatsConfirmed},{path:"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_recovered_global.csv",func:a.setStatsRecovered},{path:"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv",func:a.setStatsDeaths},{path:"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv",func:a.setStatsConfirmed},{path:"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv",func:a.setStatsDeaths}];ke(n,e,t)}(t,a,n);break;case"bing":!function(e,t,a){De.apply(this,arguments)}(t,a,n);break;case"google":!function(e,t,a){Ae.apply(this,arguments)}(t,a,n);break;default:return}}function Ve(e,t,a,n){"MultiPolygon"===e.type&&e.coordinates.forEach((function(e){Ve({type:"Polygon",coordinates:e},t,a,n)})),"Polygon"===e.type&&e.coordinates.forEach((function(e){var r,i=a.length/3;e.forEach((function(e){var n=new w.LatLng(e[1],e[0]),i=function(e){var n=p(e,t/100-1);a.push(n.x,n.y,n.z),r=e},o=void 0===r?0:n.distanceTo(r),c=Math.ceil(o/3e5);if(c<=1)i(n);else for(var s=r,u=1;u<=c;++u){var l=u/c;i(new w.LatLng(s.lat*(1-l)+n.lat*l,s.lng*(1-l)+n.lng*l))}}));for(var o=a.length/3,c=i;c<o-1;++c)n.push(c,c+1)}))}function Pe(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=new l.g,r=[],i=[];void 0!==e.length?e.forEach((function(e){return Ve(e,a,r,i)})):Ve(e,a,r,i);var o=new Float32Array(r),c=new l.f(o,3);n.setAttribute("position",c),n.setIndex(i);var s=new l.C(n,t);return s}function Be(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=[],i=Object(Oe.a)(e.features);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.push(o.geometry)}}catch(s){i.e(s)}finally{i.f()}var c=Pe(r,t,n);return c}var Fe=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(),a=Object(u.a)(t,2),i=a[0],o=a[1],b=Object(n.useState)(),_=Object(u.a)(b,2),y=_[0],E=_[1],O=Object(n.useState)(),j=Object(u.a)(O,2),k=j[0],C=j[1],D=Object(n.useState)(),M=Object(u.a)(D,2),N=M[0],R=M[1],z=Object(n.useState)(),T=Object(u.a)(z,2),V=T[0],L=T[1],Y=Object(n.useState)(),J=Object(u.a)(Y,2),H=J[0],X=J[1],W=Object(n.useState)("none"),q=Object(u.a)(W,2),K=q[0],Q=q[1],$=Object(n.useState)(),Z=Object(u.a)($,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(),ne=Object(u.a)(ae,2),re=ne[0],ie=ne[1],oe=Object(n.useState)(),ce=Object(u.a)(oe,2),se=ce[0],ue=ce[1],le=Object(n.useState)(),de=Object(u.a)(le,2),fe=de[0],me=de[1],ve=Object(n.useState)(),he=Object(u.a)(ve,2),pe=he[0],ge=he[1],be=Object(n.useState)(!0),_e=Object(u.a)(be,2),ye=_e[0],Oe=_e[1],xe=Object(n.useState)(),we=Object(u.a)(xe,2),je=we[0],Se=we[1],ke=Object(n.useState)(),Ce=Object(u.a)(ke,2),De=Ce[0],Ie=Ce[1],Me=Object(n.useState)({dispatcher:d.g("timeChanged"),_time:0,_paused:!0,_intervalId:void 0,extinction:Number.POSITIVE_INFINITY,useRecoveryData:!0,keepDeaths:!1,get time(){return this._time},set time(e){this._time!==e&&(this._time=e,this.dispatcher.call("timeChanged",null,this._time,this.date))},get date(){var e=this.startDate;if(void 0!==e)return new Date(e.valueOf()+864e5*this.time)},set date(e){var t=this.startDate;void 0!==t&&void 0!==e&&(this.time=(e.valueOf()-t.valueOf())/864e5)},get paused(){return this._paused},set paused(e){if(e!==this.paused&&(this._paused=e,void 0!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),!this.paused)){var t=void 0;this._intervalId=setInterval((function(){var e,a=Date.now(),n=(a-(null!==(e=t)&&void 0!==e?e:a))/1e3;t=a,Ne.time+=4*n}),1e3/60)}}}),Ne=Object(u.a)(Me,1)[0];Object(n.useEffect)((function(){var t=e.current;if(t){var a=function(e){var t=new h.a({animateIn:!1}).globeImageUrl("./BATH_50M_2.png").bumpImageUrl("//unpkg.com/three-globe/example/img/earth-topology.png");t.globeMaterial().polygonOffset=!0,t.globeMaterial().polygonOffsetFactor=1,t.globeMaterial().polygonOffsetUnits=1,t.showAtmosphere(!0);var a=new l.hb,n=new l.R,r=new l.M;e.appendChild(a.domElement),n.add(new l.c(12303291)),n.add(new l.o(16777215,.6)),n.add(t),r.position.x=200,r.position.y=200;var i=new v.a(r,a.domElement);i.minDistance=101,i.rotateSpeed=.5,i.zoomSpeed=1.6;return new ResizeObserver((function(){var t=e.getBoundingClientRect(),n=t.width,i=t.height;a.setSize(n,i),r.aspect=n/i,r.updateProjectionMatrix()})).observe(e),function e(){i.update(),a.render(n,r),requestAnimationFrame(e)}(),{renderer:a,scene:n,camera:r,globe:t}}(t);E(a.globe),o(a.scene),C(a.renderer),R(a.camera)}}),[]),Object(n.useEffect)((function(){if(V&&H&&je&&N&&y&&k){g({camera:N,globe:y,renderer:k,onClick:function(e){var t,a;if(!e)return ge(void 0);var n=[e.lng,e.lat],r=null===(t=(je.visible?V:H).features)||void 0===t||null===(a=t.find)||void 0===a?void 0:a.call(t,(function(e){return d.l(e.geometry,n)})),i=A(r),o=Object(u.a)(i,2),c=o[0],s=o[1];ge(null!==s&&void 0!==s?s:c)}})}}),[V,H,je,k,N,y]),Object(n.useEffect)((function(){if(i&&(Ne.selectedRegionLines&&(null===i||void 0===i||i.remove(Ne.selectedRegionLines),Ne.selectedRegionLines=void 0),V&&H&&pe))for(var e=new l.B({color:"white"}),t=0,a=[].concat(Object(s.a)(V.features),Object(s.a)(H.features));t<a.length;t++){var n=a[t];if(!(A(n).indexOf(pe)<0)){Ne.selectedRegionLines=Pe(n.geometry,e),i.add(Ne.selectedRegionLines);break}}}),[V,H,pe,i,Ne]),Object(n.useEffect)((function(){x().then(me)}),[]),Object(n.useEffect)((function(){(function(){return P.apply(this,arguments)})().then(L)}),[]),Object(n.useEffect)((function(){(function(){return B.apply(this,arguments)})().then(X)}),[]),Object(n.useEffect)((function(){if(i&&V){var e=new l.B({color:"red"}),t=Be(V,e);i.add(t),Se(t)}}),[i,V]),Object(n.useEffect)((function(){if(i&&H){var e=new l.B({color:"red"}),t=Be(H,e);i.add(t),Ie(t)}}),[i,H]),Object(n.useEffect)((function(){i&&je&&De&&N&&(i.onBeforeRender=function(){var e;De.visible=(null!==(e=N.position.length())&&void 0!==e?e:0)<200,je.visible=!De.visible})}),[i,je,De,N]),Object(n.useEffect)((function(){V&&Te(K,V,Ne,{setStatsConfirmed:te,setStatsRecovered:ie,setStatsDeaths:ue})}),[Ne,V,K]),Object(n.useEffect)((function(){var t=e.current;t&&ee&&se&&Ne&&function(e){var t,a=e.element,n=e.globals,r=e.statsConfirmed,i=e.statsDeaths,o=e.selectedRegion;d.q(a).selectAll("svg#chart").data([]).exit().remove();var c=d.q(a).selectAll("svg#chart").data([0]).enter().append("svg").attr("id","chart"),s=r.dates,u=r.data,l=i.data,f=[],m=[];o=null!==(t=o)&&void 0!==t?t:"Worldwide";var v=function(e){return void 0===o||e.admin.some((function(e){return e===o}))};u.forEach((function(e){v(e)&&e.values.forEach((function(e,t){var a;f[t]=(null!==(a=f[t])&&void 0!==a?a:0)+e}))})),l.forEach((function(e){v(e)&&e.values.forEach((function(e,t){var a;m[t]=(null!==(a=m[t])&&void 0!==a?a:0)+e}))}));var h=G(f),p=G(m),g=c.node(),b=d.p().domain(d.j(s)),_={x:b},y=d.o().domain([0,d.n(f)]).nice(),E=d.o().domain([0,d.n(m)]).nice(),O=d.o().domain([1,1.25]).nice(),x=d.a(b).tickSizeOuter(0),w=d.b(y),j=d.c(E),S=c.append("g").attr("class","y-confirmed-axis").call(w),k=c.append("g").attr("class","y-deaths-axis").call(j),C=d.m().defined((function(e){return!isNaN(e.value)})).x((function(e){return _.x(e.date)})).y((function(e){return y(e.value)})),D=d.m().defined((function(e){return!isNaN(e.value)})).x((function(e){return _.x(e.date)})).y((function(e){return E(e.value)})),I=d.m().defined((function(e){return!isNaN(e.value)})).x((function(e){return _.x(e.date)})).y((function(e){return O(e.value)})),M=c.append("defs").append("clipPath").attr("id","clip").append("rect"),N=f.map((function(e,t){return{value:e,date:s[t]}})),R=m.map((function(e,t){return{value:e,date:s[t]}})),z=h.map((function(e,t){return{value:e,date:s[t]}})),A=p.map((function(e,t){return{value:e,date:s[t]}})),T=function(e,t){return c.append("path").datum(e).attr("class","path").attr("fill","none").attr("clip-path","url(#clip)").attr("stroke-width",1.5).attr("d",t)};T(z,I).attr("stroke","steelblue").attr("stroke-opacity","33%").attr("class","rate-path"),T(A,I).attr("stroke","red").attr("stroke-opacity","33%").attr("class","rate-path"),T(N,C).attr("stroke","steelblue").attr("class","confirmed-path"),T(R,D).attr("stroke","red").attr("class","deaths-path");var V=c.append("g").attr("clip-path","url(#clip)").attr("class","chart-overlay"),P=V.append("path").attr("class","current-time current-time-drag").style("stroke","yellow").style("stroke-width","16px");V.append("path").attr("class","current-time").style("stroke","red").style("stroke-width","1px");var B=V.selectAll(".current-time"),F=void 0,L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0!==e?F=e:e=F,void 0!==e){var t=g.getBoundingClientRect(),a=t.height,n=_.x(e);B.datum([[n,U[1]],[n,a-U[1]]]).attr("d",d.m())}};n.dispatcher.on("timeChanged.chart",(function(e,t){return L(t)}));var Y=c.append("g").attr("clip-path","url(#clip)").append("g").attr("class","x-axis").call(x);function J(){var e=d.i,t="drag"===e.type&&[e.x,e.y]||d.d(e.target,e);return _.x.invert(t[0])}c.append("text").classed("title",!0).attr("x","50%").attr("y",64).text(o),c.append("text").classed("legend-left",!0).attr("x","0%").attr("y",128).text("Confirmed"),c.append("text").classed("legend-right",!0).attr("x","100%").attr("y",128).text("Deaths"),c.on("click",(function(){n.date=J()}));var H={paused:!1},X=d.h().on("start",(function(){H.paused=n.paused,n.paused=!0})).on("end",(function(){n.paused=H.paused})).on("drag",(function(){n.date=J()}));P.call(X);var W,q={},K=function(e){var t=g.getBoundingClientRect(),a=t.width,n=t.height,r=[[U[0],U[1]],[a-U[0],n-U[1]]],i=function(){var t,a,n=null!==(t=null===(a=d.i)||void 0===a?void 0:a.transform)&&void 0!==t?t:d.u(e.node());_.x=n.rescaleX(b),e.selectAll(".confirmed-path").attr("d",C),e.selectAll(".deaths-path").attr("d",D),e.selectAll(".rate-path").attr("d",I),x.scale(_.x),e.select(".x-axis").call(x),L()},o=d.s().scaleExtent([1,20]).extent(r).on("zoom",i);W=o,e.call(o),i()};new ResizeObserver((function(){if(g){var e=g.getBoundingClientRect(),t=e.width,a=e.height;b.range([0+U[0],t-U[0]]),[y,E,O].forEach((function(e){return e.range([a-U[1],0+U[1]])})),Y.attr("transform","translate(0,".concat(a-U[1],")")).call(x),S.attr("transform","translate(".concat(0+U[0],",0)")).call(w),k.attr("transform","translate(".concat(t-U[0],",0)")).call(j),M.attr("x",U[0]).attr("y",U[1]).attr("width",t-2*U[0]).attr("height",a-U[1]),void 0!==q.width&&c.call(W.transform,d.t),q={width:t,height:a},c.call(K)}})).observe(a)}({element:t,globals:Ne,statsConfirmed:ee,statsDeaths:se,selectedRegion:pe})}),[ee,se,Ne,pe]),Object(n.useEffect)((function(){if(fe&&i&&V&&H&&ee&&re&&se){var e=Object(c.a)(Object(c.a)({},V),{},{features:[].concat(Object(s.a)(V.features),Object(s.a)(H.features))}),t=function(e,t,a,n,r,i){var o=[],c=t.features.map((function(t){var a,o,c,s,u=A(t),l=function(e){return I(e.admin,u)};return{geoBounds:d.k(t.geometry),feature:t,densities:null===(a=e.find((function(e){return I([(t=e).admin,t.admin_1],u);var t})))||void 0===a?void 0:a.densities,statsConfirmed:null===(o=n.data.find(l))||void 0===o?void 0:o.values,statsRecovered:null===(c=r.data.find(l))||void 0===c?void 0:c.values,statsDeaths:null===(s=i.data.find(l))||void 0===s?void 0:s.values}}));c=c.filter((function(e){return e.statsConfirmed&&e.densities&&e.densities.values.length>0}));var s={};c.forEach((function(e){var t,a=A(e.feature);I(a,[a[0]])||(s[a[0]]=(null!==(t=s[a[0]])&&void 0!==t?t:0)+1)})),(c=c.filter((function(e){var t=A(e.feature);return!(I(t,[t[0]])&&s[t[0]]>0)}))).forEach((function(e){var t,a;if(e.statsConfirmed){var n=function(e){var t=Math.random(),a=S()(e.densities.values,t,(function(e,t){return e-t}));a<0&&(a=-a-1),a=Math.max(0,Math.min(e.densities.values.length-1,a));var n=new w.LatLng(e.densities.lats[a],e.densities.lngs[a]);return n.lat+=r(),n.lng+=r(),n},r=function(){return(2*Math.random()-1)*(360/4096/2)},i=F(),c=o.length,s=function(e,t){var a,n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=null!==(a=e[t])&&void 0!==a?a:0,s=null!==(n=e[t-1])&&void 0!==n?n:0,u=(c-s)/i,l=null!==(r=o.remainder)&&void 0!==r?r:0;if((l+=u-Math.floor(u))>=1){var d=Math.floor(l);u+=d,l-=d}return o.remainder=l,Math.floor(u)},u={},l={},d={};if(e.statsConfirmed){e.statsConfirmed.forEach((function(t,a){for(var r=s(e.statsConfirmed,a,u),i=0;i<r;++i)o.push({point:n(e),time:a,recoveredTime:a+14})}));var f=e.statsConfirmed.map((function(){return{recovered:0,dead:0}}));null===(t=e.statsRecovered)||void 0===t||t.forEach((function(t,a){var n=s(e.statsRecovered,a,l);f[a].recovered+=n})),null===(a=e.statsDeaths)||void 0===a||a.forEach((function(t,a){var n=s(e.statsDeaths,a,d);f[a].dead+=n}));var m=c;f.forEach((function(e,t){for(var a=0;a<e.dead;++a){var n=o[m++];if(void 0===n)return;n.recoveredTime=void 0,n.deadTime=t}for(var r=0;r<e.recovered;++r){var i=o[m++];if(void 0===i)return;i.recoveredTime=t}}))}}})),o.forEach((function(e,t){var a=Math.random();o[t].time+=a,void 0!==o[t].recoveredTime&&(o[t].recoveredTime+=a),void 0!==o[t].deadTime&&(o[t].deadTime+=a)}));var u=new l.g,f=new Float32Array(o.map((function(e){var t=p(e.point);return[t.x,t.y,t.z]})).flat()),m=new Float32Array(o.map((function(e){return e.time}))),v=new Float32Array(o.map((function(e){var t;return null!==(t=e.recoveredTime)&&void 0!==t?t:Number.POSITIVE_INFINITY}))),h=new Float32Array(o.map((function(e){var t;return null!==(t=e.deadTime)&&void 0!==t?t:Number.POSITIVE_INFINITY})));u.setAttribute("position",new l.f(f,3)),u.setAttribute("confirmed_time",new l.f(m,1)),u.setAttribute("recovered_time",new l.f(v,1)),u.setAttribute("dead_time",new l.f(h,1));var g=new l.T({uniforms:{time:{value:0}},vertexShader:"uniform float time;\nuniform bool use_recovery_data;\nattribute float confirmed_time;\nvarying float var_confirmed_time;\nattribute float recovered_time;\nvarying float var_recovered_time;\nattribute float dead_time;\nvarying float var_dead_time;\nvarying float circle_blend_factor;\n\nconst float minsize = 1.;\nconst float maxsize = 7.;\nconst float dead_maxsize = 14.;\nconst float big_value = 1e30;\n\nvoid main() {\n  var_confirmed_time = confirmed_time;\n  var_recovered_time = use_recovery_data ? recovered_time : big_value;\n  var_dead_time = dead_time;\n\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n  float x = time - confirmed_time;\n  float y = time - dead_time;\n\n  if (x < 0.)\n    x = 0.;\n  else\n    x = mix(minsize, maxsize, exp(-x));\n\n  if (y >= 0.)\n    x = mix(minsize, dead_maxsize, exp(-y));\n\n  circle_blend_factor = min(max(0., x - 1.), 1.);\n\n  gl_PointSize = x;\n  gl_Position = projectionMatrix * mvPosition;\n}\n",fragmentShader:"uniform float time;\nuniform float extinction_time;\nuniform bool keep_deaths;\nvarying float var_confirmed_time;\nvarying float var_recovered_time;\nvarying float var_dead_time;\nvarying float circle_blend_factor;\n\nconst vec3 confirmed_color = vec3(0., 0., 1.);\nconst vec3 recovered_color = vec3(0., .25, 0.);\nconst vec3 dead_color = vec3(1., 0., 0.);\n\nconst float big_value = 1e30;\n\nvoid main() {\n  float x = time - var_confirmed_time;\n  float y = x;\n\n  if (x < 0.)\n    x = 0.;\n  else\n    x = 1.;\n  if (y < 0.)\n    y = 0.;\n  else\n    y = exp(-y * 10.);\n\n  float blend = max(0., 1. - length(gl_PointCoord.st * 2. - 1.));\n  float blur = .01;\n\n  blend = smoothstep(.5 - blur, .5 + blur, blend);\n  blend = mix(1., blend, circle_blend_factor);\n\n  float extinct_time = var_confirmed_time + extinction_time;\n\n  if (keep_deaths && var_dead_time < big_value) {\n    extinct_time = big_value;\n  }\n\n  float z = time - extinct_time;\n\n  if (z >= 0.)\n    blend = mix(0., blend, exp(-z));\n\n  vec3 color = confirmed_color * x;\n\n  color = mix(color, recovered_color,\n              max(0., min(1., time - var_recovered_time - 1.)));\n\n  if (time - var_dead_time >= 0.)\n    color = dead_color;\n\n  color += vec3(1e-2);\n\n  gl_FragColor = vec4(color, blend * x);\n}",blending:l.l,blendEquation:l.a,blendSrc:l.X,blendSrcAlpha:l.L,blendDst:l.L,transparent:!0,depthWrite:!1}),b=new l.N(u,g);return a.dispatcher.on("timeChanged.data-points",(function(e){g.uniforms.time.value=e})),b.onBeforeRender=function(){g.uniforms.extinction_time={value:a.extinction},g.uniforms.keep_deaths={value:a.keepDeaths},g.uniforms.use_recovery_data={value:a.useRecoveryData}},b}(fe,e,Ne,ee,re,se);i.add(t),Oe(!1)}}),[i,fe,V,H,Ne,ee,re,se]);var Re=r.a.useMemo((function(){return Object(f.a)({palette:{type:"dark",primary:{main:"#648dae"}}})}),[]);return Ne.paused=ye,r.a.createElement(m.a,{theme:Re},r.a.createElement("div",{className:"App",ref:e}),r.a.createElement(Ee,{paused:ye,setPaused:function(e){Oe(e)},dataSource:K,setDataSource:Q,globals:Ne}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[212,1,2]]]);
//# sourceMappingURL=main.d3925ecf.chunk.js.map